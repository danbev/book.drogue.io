<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Drogue IoT Cloud setup :: Drogue IoT</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z4BRXRBJJ1"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-Z4BRXRBJJ1')</script>
    <script>var uiRootPath = '../../_'</script>
    <link rel="icon" href="../../_/img/favicon.svg" type="image/svg+xml">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">
        <img class="navbar-brand-image" src="../../_/img/logo.png" alt="Drogue IoT"/>
      </a>

      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://blog.drogue.io" target="_blank">Blog</a>
        <a class="navbar-item" href="https://matrix.to/#/#drogue-iot:matrix.org" target="_blank">Chat</a>
        <a class="navbar-item" href="https://book.drogue.io">Documentation</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="drogue-workshops" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Drogue IoT Workshops</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Introduction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting-started/index.html">Getting started</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">LoRaWAN end-to-end</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../common/toolchain.html">Embedded toolchain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="account-setup.html">TTN account setup</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="drogue-cloud.html">Drogue Cloud setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="firmware.html">Device firmware</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quarkus-application.html">Quarkus application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="making-changes.html">Making changes</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Drogue IoT Workshops</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../drogue-cloud/dev/index.html">Drogue Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../drogue-cloud/dev/index.html">dev</a>
        </li>
        <li class="version">
          <a href="../../drogue-cloud/0.4/index.html">0.4</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../drogue-device/dev/index.html">Drogue Device</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../drogue-device/dev/index.html">dev</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../drogue-book/index.html">Drogue IoT</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../drogue-book/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Drogue IoT Workshops</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../drogue-book/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Drogue IoT Workshops</a></li>
    <li><a href="index.html">LoRaWAN end-to-end</a></li>
    <li><a href="drogue-cloud.html">Drogue Cloud setup</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/drogue-iot/drogue-workshops/edit/main/modules/ttn-lorawan-quarkus/pages/drogue-cloud.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Drogue IoT Cloud setup</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>We will need to create a new application inside Drogue Cloud and register a device with it. We will also enable the
TTN integration so that application and device will be synchronized with the TTN system.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_new_application"><a class="anchor" href="#_create_a_new_application"></a>Create a new application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Simply create a new application using <code>drg</code>:</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Application name</div>
<div class="paragraph">
<p>By default, the Drogue IoT application name will also be used as the TTN application name. The name must be unique
in both systems. You have the ability to override the application name, when synchronizing with the TTN system. However,
this only makes things complicated. So try to come up with a name that should still be free.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>drg create app my-app</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enable_the_ttn_integration_for_the_application"><a class="anchor" href="#_enable_the_ttn_integration_for_the_application"></a>Enable the TTN integration for the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add the <code>.spec.ttn</code> section to the application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>drg create app my-app --spec '{
    "ttn": {
        "api": {
            "apiKey": "...", <i class="conum" data-value="1"></i><b>(1)</b>
            "id": "my-app-alias", <i class="conum" data-value="2"></i><b>(2)</b>
            "owner": "my-user-name", <i class="conum" data-value="3"></i><b>(3)</b>
            "region": "eu1" <i class="conum" data-value="4"></i><b>(4)</b>
        }
    }
}'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The API key, generated earlier.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>(Optionally) An alternative application name in the TTN system. By default, this is the Drogue application name.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The name of the TTN user, selected when creating the TTN account.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The cluster region, selected when creating the TTN account.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_device_with_ttn_integration"><a class="anchor" href="#_create_device_with_ttn_integration"></a>Create device with TTN integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Next, create a device and enable the TTN synchronization:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>drg create device my-device --app my-app --spec '{
    "ttn": {
        "app_eui": "0123456789ABCDEF",
        "dev_eui": "0123456789ABCDEF",
        "app_key": "0123456789ABCDEFGHIJKLMNOPQRSTUV", <i class="conum" data-value="1"></i><b>(1)</b>
        "frequency_plan_id": "...", <i class="conum" data-value="2"></i><b>(2)</b>
        "lorawan_phy_version": "PHY_V1_0",
        "lorawan_version": "MAC_V1_0"
    }
}'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A 32 byte application key. <strong>IMPORTANT</strong> This should be changed to a secret value</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>An ID of the TTN supported frequency plans, e.g. <code>EU_863_870_TTN</code>. Also see: <a href="https://www.thethingsindustries.com/docs/reference/frequency-plans/" class="bare">https://www.thethingsindustries.com/docs/reference/frequency-plans/</a></td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_checking_the_results"><a class="anchor" href="#_checking_the_results"></a>Checking the results</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you created the TTN settings, you should see a <code>.status.ttn</code> section for both of the resources. This section
should show the state of the reconciliation process.</p>
</div>
<div class="paragraph">
<p>If both resources are successfully reconciled, you can proceed.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
